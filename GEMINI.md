---
# 项目概览

这是一个为大学辩论队设计的现代化单页应用，旨在视觉上吸引并招募新成员。

它采用 **Vue.js 3** 和 **Vite** 构建工具构建，遵循了现代最佳实践，例如使用 `<script setup>` 的组合式 API。该项目在单页应用的上下文中构建为多页应用，使用 **Vue Router** 在不同视图（如主页和“我们为何辩论”文章页面）之间进行导航。

样式由 **Tailwind CSS** 这一实用工具优先的框架处理。项目还集成了像 **Lenis** 这样的库，以提供流畅、高质量的滚动体验。

    ```

# 开发约定

*   **组件结构：** 项目按角色分离组件：
    *   `src/views/`：包含与页面/路由对应的顶级组件（例如 `Home.vue`）。
    *   `src/components/`：包含被导入到视图中的可复用、局部组件（例如 `DebateGallery.vue`, `TeamMembers.vue`）。
*   **路径别名：** 在 `vite.config.js` 中配置了一个方便的路径别名 `@`，直接指向 `src/` 目录。在项目中应始终使用此别名进行绝对路径导入。
    ```javascript
    // 示例
    import Home from '@/views/Home.vue';
    import MyComponent from '@/components/MyComponent.vue';
    ```
*   **样式：** 所有样式都应直接在 Vue 组件的 `<template>` 中使用 Tailwind CSS 工具类完成。全局样式位于 `src/style.css`。
*   **路由：** 所有应用路由都在 `src/router/index.js` 中定义。要添加新页面，你必须在 `src/views` 中创建一个新的视图组件，并在 `routes` 数组中添加一个相应的路由对象。

---
# 会话摘要 (2025-08-31)

- **导航栏功能修复**
  - **问题**：全局导航栏的三个按钮（文化、团队、加入我们）完全失效，无法跳转到主页的相应版块，尤其是在子页面时。
  - **方案**：
    1.  **重构导航逻辑**：将 `App.vue` 中的 `<router-link>` 标签替换为标准的 `<a>` 标签，并为其绑定了自定义的 `@click` 事件。
    2.  **实现智能滚动函数**：创建了 `scrollToSection` 函数。该函数能判断当前是否在主页：若在主页，则直接平滑滚动到目标ID；若不在主页，则先通过 `router.push('/')` 跳转回主页，然后在 `nextTick` 回调中再执行平滑滚动。
    3.  **修复目标锚点**：为 `Home.vue` 中的 `<TeamCulture />`, `<TeamMembers />`, 和 `<JoinUs />` 组件分别补上了缺失的 `id="culture"`, `id="team"`, `id="join"`，确保滚动函数能找到目标。
  - **结果**：实现了可靠的跨页面锚点跳转功能，无论用户身处何处，导航栏都能正常工作。

- **`TeamCulture.vue` 竞态条件 Bug 修复 (移动端)**
  - **问题**：在移动端环境下，`TeamCulture` 组件的滚动劫持效果会延迟生效。用户可以先将该区域划过，稍等片刻后，劫持效果才启动。
  - **根因**：在移动端较慢的环境下，动画库 `Lenis` 的初始化与图片资源的加载这两个异步操作之间的“竞态条件”被放大。动画逻辑在图片未完全加载、组件未获得最终尺寸时就已执行，导致其基于错误的尺寸计算出无需劫持，从而失效。
  - **方案**：重构了组件的初始化流程。将 `Lenis` 的初始化和事件绑定逻辑，从 `onMounted` 的主流程中移出，放到了 `setupGallery` 函数中，并确保它只在所有图片都加载完毕、组件高度被精确设置**之后**才被调用。
  - **结果**：彻底解决了移动端滚动劫持的延迟问题，确保了动画效果在所有设备上的一致性和可靠性。

- **`TeamMembers.vue` 成员列表重构与增强**
  - **问题**：需要为一批只有姓名和去向、没有照片的往届队员，在现有设计风格的基础上增加一个展示区域。
  - **方案**：将无照片的队员无缝整合进现有的筛选系统和卡片网格布局中，实现了更统一的交互体验。
    -   **数据重组**：将原有的“往届”分类重命名为“21级”，并为无照片的队员创建了新的“往届”分类。
    -   **条件化布局**：通过为 `members-grid` 容器动态绑定一个特殊类 (`:class="{ 'is-alumni-list': activeFilter === '往届' }")`，实现了对“往届”分类的定制化渲染。
    -   **定制化样式**：当 `.is-alumni-list` 类被激活时，通过专门的 CSS 规则隐藏了默认的圆形图片占位符，将布局从四列改为更紧凑的两列（桌面端），并将文本对齐方式改为左对齐，最终呈现为一个清晰、易于阅读的 `姓名 - 去向` 列表。
  - **结果**：在不破坏组件统一性的前提下，优雅地解决了两种不同类型成员的展示问题，并针对性地优化了信息密度，使“往届”队员的去向信息更加突出。

---
# 会话摘要 (2025-08-30)

- **性能优化：资源预加载**
  - **问题**：用户反馈在 `TeamCulture.vue` 中切换图片组，以及加载 `TeamMembers.vue` 组件时存在明显卡顿。
  - **方案**：在 `App.vue` 中实现了一套智能预加载策略。通过 Vite 的 `import.meta.glob` 功能，在应用挂载后动态扫描 `members` 和 `family` 目录下的所有图片，并自动生成 `<link rel="prefetch">` 标签注入 HTML 头部。
  - **结果**：浏览器可以在空闲时提前下载后续页面所需的关键图片资源，显著改善了导航和交互的流畅度。该优化仅在生产环境生效。

- **`TeamCulture.vue` Bug修复与交互重构**
  - **问题**：独立的“下一组”按钮在视觉上与画廊主体“割裂”，且多次尝试用纯 CSS 调整其位置均引发了新的布局 Bug，调试体验不佳。
  - **方案**：废弃了独立的外部按钮，重构为更现代、更直观的**“画廊内嵌式左右箭头”**导航方案。
    - **交互**：在桌面端，导航箭头默认隐藏，仅在鼠标悬停于画廊区域时浮现；在移动端则始终可见。该方案还额外增加了点击左箭头返回上一组图片的功能。
    - **样式**：在重构交互的同时，保留并确认了之前实现的**“等高画廊”**样式，确保了图片在视觉上的规整与统一。
  - **结果**：从根本上解决了按钮的定位难题，使组件的交互逻辑更清晰、视觉更完整，并提升了易用性。

---
# 会话摘要 (2025-08-29)

- **`TeamCulture.vue` 交互与视觉重构：**
  - **问题**：原有的双栏“滚动叙事”布局文案压力过大，且视觉风格略显陈旧。后续尝试的全屏长画廊版本虽然视觉震撼，但因“滚动劫持”时间过长而导致用户体验不佳。
  - **方案 (最终方案)**：借鉴 Apple 官网的设计哲学，实现了一种创新的**“内容替换式”横向滚动**交互模型。
    1.  **核心交互**：组件在任何时候只显示**一组**（一个章节）的图片。整个横向滚动动画的长度只根据当前组的图片数量动态计算，体验轻快。
    2.  **用户控制**：在界面右下角提供了一个“下一组”按钮。用户点击后，当前图片组被下一组**替换**，同时组件会**强制重置**滚动动画到起点，让用户可以主动、分段式地探索内容，彻底解决了“滚动疲劳”问题。
    3.  **视觉统一**：采用了与 `DebateGallery.vue` 一致的深色主题背景（`#111827`），确保了网站整体风格的统一和高级感。
  - **关键 Bug 修复与优化**：
    -   修复了因绝对定位导致的**标题与图片重叠**的布局 Bug。
    -   调整了 CSS，使画廊中的图片能以其**原始宽高比**展示，增强了视觉的自然感和错落感。
    -   修复了切换章节时，滚动动画**无法可靠重置到起点**的 Bug。

- **`DebateGallery.vue` 移动端布局修复：**
  - **问题**：在移动端视图下，因描述文字加长，导致绝对定位的 `header` 内容遮盖了下方的“滚动驱动横向动画”画廊。
  - **目标**：在修复遮挡问题的同时，必须在移动端**保留**与桌面端完全一致的滚动动画体验。
  - **方案**：采用纯 CSS 方案解决了布局问题。在移动端媒体查询中 (`@media (max-width: 768px)`)：
    1.  为 `sticky` 定位的父容器 `.sticky-container` 增加了 `padding-top: 16rem`，在其顶部创造出一个固定的“安全区”来放置 `header`。
    2.  同时，将该容器的 `align-items` 从 `center` 改为 `flex-start`，使画廊内容从“安全区”的正下方开始排列，从而彻底避免了重叠。
  - **结果**：该方案在未改动任何 JS 动画逻辑的前提下，稳健地修复了布局，确保了全端体验的一致性。

---
# 会话摘要 (2025-08-21)

- **`TeamCulture.vue` 移动端响应式适配：**
  - **问题**：为桌面端设计的两列“滚动叙事”布局在移动端屏幕上完全失效，导致内容重叠、空间浪费。
  - **方案**：采用“移动端优先”的原则对组件进行了响应式重构。
    - **移动端 (默认)**：默认采用单列垂直布局，内容按“标题 -> 描述 -> 图片画廊”的顺序自然流淌，保证了在窄屏幕上的可读性和可用性。
    - **桌面端 (>=1024px)**：通过 `@media` 查询，当屏幕宽度超过 1024px 时，自动切换回原有的两列式、左侧文字固定的沉浸式布局。
    - **结构调整**：在 HTML 结构中加入了仅在移动端显示的 `.mobile-header`，并对 CSS 进行了分层，实现了移动端和桌面端样式的按需加载。

- **`TeamCulture.vue` 画廊交互与视觉增强：**
  - **问题**：解决了因图片数量过多导致的“滚动疲劳”问题，并对画廊的交互方式和视觉表现进行了迭代优化。
  - **方案演进**：
    1.  **初步方案**：将默认的垂直图片流改为**水平滚动**，以大幅缩短页面垂直长度。
    2.  **交互探索**：在用户的建议下，实现了**“点击图片切换下一张”**的交互模式，并修复了其中的计算 Bug。
    3.  **视觉深化 (最终方案)**：为了解决不同宽高比图片切换时产生的“残留”问题，并提升设计感，最终实现了一个**带有3D景深效果的画廊**。
        -   **核心样式**：通过为非激活图片设置 `opacity: 0.4` 和 `transform: scale(0.9)`，为激活图片设置 `opacity: 1` 和 `transform: scale(1)`，创造出主次分明、富有层次感的视觉效果。
        -   **尺寸调整**：为在保留景深效果的同时放大主图的视觉冲击力，对容器 `padding` 和图片 `flex-basis` 进行了微调。最终样式为：`.image-group { padding: 0 2.5%; }` 和 `.image-placeholder { flex: 0 0 95%; }`。

- **`TeamCulture.vue` 布局与视觉优化：**
  - **问题：** 页面在宽屏下显得空旷，内容区域过窄。
  - **方案：** 与用户一同探讨并试验了多种布局参数。最终确定了以下优化方案来增强页面的视觉表现力和现代感：
    - **拓宽内容容器：** 将 `.grid-container` 的 `max-width` 从 `1280px` 提升至 `1536px`，并移除了水平 `padding`，使内容在宽屏下更显开阔。
    - **调整垂直间距：** 增加了章节之间 (`5rem`) 和图片之间 (`3rem`) 的 `gap`，创造了更舒缓、更有节奏感的滚动体验。

- **`TeamCulture.vue` 图片显示优化：**
  - **问题：** 组件中的图片被强制拉伸或裁剪成固定比例，无法保持其原始宽高比。
  - **方案：** 将基于 `<div>` 背景图的实现方式，替换为使用标准的 `<img>` 标签。相应地，调整了 CSS 样式，移除了强制设定高宽比的 `padding-bottom` 属性，改为使用 `width: 100%` 和 `height: auto`，使图片能够在适应容器宽度的同时，保持其自然的、原始的宽高比。
  - **附注：** 向用户解释了在 Vite 项目中，通过 `import` 从 `src/assets` 导入图片与直接链接 `public` 目录下的图片的区别，重点阐述了 `import` 方案在路径处理、缓存控制和性能优化方面的优势。

- **`TeamCulture.vue` 滚动同步问题：**
  - **问题：** 在 `TeamCulture.vue` 组件中，当用户快速滚动时，由于 `IntersectionObserver` 监测的目标元素（一个 1px 高的 "sentinel" 元素）过小，导致交叉事件丢失，左侧的文本内容无法与右侧的图片章节同步更新。
  - **方案：** 修改了 `IntersectionObserver` 的配置，使其不再观察 "sentinel" 元素，而是直接观察代表每个章节的、尺寸更大的 `.image-group` 容器。这增加了触发区域，确保了即使在快速滚动下也能稳定、准确地更新视图。

- **`DebateGallery.vue` 移动端适配：**
  - **问题：** 解决了在移动端视图下，头部标题和描述文字因空间不足而重叠，导致内容被遮挡的问题。
  - **方案：** 通过添加响应式 CSS (`@media` 查询)，在窄屏幕上将头部内容从水平布局改为垂直堆叠，并相应调整了字体大小、对齐方式和间距，确保了内容的可读性。

---
# 会话摘要 (2025-08-15)

- **`TeamCulture.vue` 组件重构：**
  - 将基于时间的图片轮播替换为滚动驱动的动画。现在，右侧画廊中显示的图片与用户在左侧相应文本章节中的滚动进度直接映射。
  - 这是通过移除 `setInterval` 逻辑并实现一个 `scroll` 事件监听器来完成的，该监听器计算活动章节（由 `IntersectionObserver` 识别）内的滚动进度。

- **导航栏增强：**
  - 解决了导航栏文本在浅色背景下变得不可见的问题。
  - 实现了一个动态颜色反转方案：
    - 全局的 `App.vue` 现在包含一个 `IntersectionObserver`，用于监视一个特定的 ID (`#light-bg-section`)。
    - 当头部与带有此 ID 的元素（如 `TeamCulture.vue`）相交时，它会动态地将导航文本和按钮颜色更改为深色主题，以获得更好的可见性。

- **布局与样式调整：**
  - 试验了 `Home.vue` 英雄区域的全宽布局与基于容器的布局，以提高与其他页面部分的视觉一致性。
  - 最终确定了一种混合方法：主页上的主要内容保持在居中容器内以保证可读性，而主导航栏则调整为全宽，使其内容可以对齐到视口的远右侧。

- **开发环境故障排查：**
  - 调查并解决了一个问题，即在添加了更复杂的逻辑后，IDE 错误地报告 `.vue` 文件中的语法错误。
  - 根本原因被确定为文件损坏问题（一个重复的 `<template>` 标签），这是由一个有缺陷的 `replace` 工具操作引起的。
  - 使用 `write_file` 纠正了损坏的文件，并清除了在故障排查期间添加的不必要的 `tsconfig.json` 和 `typescript` 依赖。
  - **行动项：** 根据用户指示，未来的文件修改将避免使用 `replace` 工具，转而使用 `write_file` 以确保文件完整性。
---
# 会话摘要 (2025-08-14)

- **项目交接准备：**
  - 主要目标是为与非开发人员队友的协作做准备。这涉及大量的文档编写和代码重构。

- **`README.md` 大修：**
  - 为新贡献者创建了一份全面的指南。
  - 添加了一个详细的、对初学者友好的工作流程，涵盖了初始设置、日常分支、提交和创建拉取请求。
  - 包含了一个项目范围的待办事项列表。
  - 建立了一个简化的“约定式提交”规范（`docs`, `chore`, `fix`, `feat`），以标准化提交消息。

- **资产管理和重构：**
  - 通过修改 `.gitignore`，将 `src/assets` 目录纳入 Git 版本控制。
  - 系统地将所有路径中包含中文字符的资产重命名为使用英文/拼音，以防止潜在的构建和部署问题。
  - 更新了多个组件（`DebateGallery.vue`, `Home.vue`, `TeamCulture.vue`）中的所有代码引用，以反映新的资产路径，解决了构建错误。

- **协作工作流讨论：**
  - 分析了两种常见协作模式的优缺点：在共享仓库中创建分支与复刻（forking）仓库。
  - 结论是，共享仓库模型更简单，更适合本项目的上下文。更新后的 `README.md` 反映了这一工作流程。